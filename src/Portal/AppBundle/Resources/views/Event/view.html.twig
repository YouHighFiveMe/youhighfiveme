{% extends '::base.html.twig' %}

{% block content %}
    <h2 class="p8">
        <span class="color-1">Event</span>
        <br/>
        {{ event.title }}
    </h2>

    <article class="event">
        <div class="author">

        </div>
        <div class="data">
            <header>
                {{ event.created|date('M d, Y') }} by <a href="{{ path('PortalAppBundle_cv') }}/{{ event.user.getUserName() }}">{{ event.user.getName() }}</a>
            </header>
            <p class="description">{{ event.description }}</p>
            <p class="count"><img src="{{ asset('images/hand.gif') }}"/>{{ event.countHighfives }} high fives</p>
        </div>
    </article>

    {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
        {% if showForm %}
            <h2 class="p0">
                <span class="color-1">Send</span> high five
            </h2>

            <div id="create-highfive" class="p1">
                <form id="form" action="{{ path('PortalAppBundle_event_view', { 'eventId': event.shortUrl }) }}" method="post" {{ form_enctype(form) }} class="blogger">
                    {{ form_widget(form) }}
                    <div class="btns">
                        <input class="button" type="submit" value="Submit">
                    </div>
                </form>
            </div>
        {% endif %}
    {% endif %}

    <h2 class="p8">
        <span class="color-1">High fives</span> received
    </h2>

    <div id="entries">
        {% for highfive in event.highfives|reverse %}
            <article class="event">
                <div class="author icon-only">
                    <img src="{{ gravatar(highfive.user.getEmail(), 75) }}"/>
                </div>
                <div class="data">
                    <p class="description">
                        <p><strong>{{ highfive.user.getName() }}</strong></p>
                        <p>{{ highfive.getComment() }}</p>
                        <p><i>Sent on {{ highfive.getCreated()|date('M d, Y') }}</i></p>
                    </p>
                </div>
            </article>
        {% else %}
            <p class="p2"><strong>No high fives for this event...</strong></p>
        {% endfor %}
    </div>
{% endblock content %}

{% block sidenav %}
    <h2 class="p3"><span class="color-1">Latest</span> events</h2>

    <p class="p5">
    {% for event in latestEvents %}
        <article class="event-small">
            <div class="data">
                <header>
                    <strong><a href="{{ path('PortalAppBundle_event_view', { 'eventId': event.shortUrl }) }}">{{ event.title }}</a></strong><br/>
                    By {{ event.user.getName() }}
                </header>
            </div>
        </article>
    {% else %}
        <p class="p2"><strong>No events found...</strong></p>
    {% endfor %}
    </p>
{% endblock sidenav %}

